import{r,h as v,j as e,u as ie,L as le,a as ce,S as de}from"./app-CLxL74cB.js";import{c as f,B as p}from"./button-C8IOe_6Y.js";import{f as C,C as ue,a as xe}from"./calendar-BUxsGz5-.js";import{P as me,a as he,b as ge}from"./popover-D8u-DhpO.js";import{D as Y,a as V,A as M,b as P,C as pe,c as _,d as w,e as A,E as fe,f as je,k as ve,l as we,m as be,n as ye,u as Ne,v as L,R as Ce,I as Se,P as De}from"./AuthenticatedLayout-FNBPBHFS.js";import"./dialog-CRR6Ri4u.js";import"./input-D18HD6kV.js";import"./label-DIE-XY19.js";import{DeleteTouristDialog as Re}from"./Delete-CD0ambmQ.js";import"./index-CAcYy167.js";import{c as E,u as Te,a as Me,b as Pe,P as ke,d as S}from"./index-cbqACyQa.js";import{u as Ie,T as Fe,m as Ye,n as D,o as Ve,p as k,q as _e,r as I,g as Ae,h as Le,i as Ee,j as $e,k as He,l as Ge,S as qe}from"./command-BGxswBid.js";import{S as $,a as H,b as G,c as q,d as B}from"./select-BmbNATu0.js";import{P as N}from"./index-D1xUvb-1.js";import"./x-BgIleQgA.js";import"./index-B8NKjWkD.js";import"./alert-dialog-CUW-1gg4.js";import"./index-CzDFdiH0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ze=E("Download",Be);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2",key:"mrq65r"}],["path",{d:"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2",key:"be3xqs"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]],Oe=E("View",Ke);function Ue({className:s,disabled:a,setReportDate:n}){const[t,l]=r.useState({from:v(new Date).format("YYYY-MM-DD"),to:v().add(6,"days").format("YYYY-MM-DD")}),d=o=>{l(o),n(o)};return e.jsx("div",{className:f("grid gap-2",s),children:e.jsxs(me,{children:[e.jsx(he,{asChild:!0,children:e.jsxs(p,{id:"date",variant:"outline",className:f("w-[260px] justify-start text-left font-normal",!t&&"text-muted-foreground"),disabled:a,children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),t!=null&&t.from?t.to?e.jsxs(e.Fragment,{children:[C(t.from,"LLL dd, y")," -"," ",C(t.to,"LLL dd, y")]}):C(t.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(ge,{className:"w-auto p-0",align:"end",children:e.jsx(xe,{initialFocus:!0,mode:"range",defaultMonth:t==null?void 0:t.from,selected:t,onSelect:d,numberOfMonths:2})})]})})}function F({column:s,title:a,className:n}){return s.getCanSort()?e.jsx("div",{className:f("flex items-center space-x-2",n),children:e.jsxs(Y,{children:[e.jsx(V,{asChild:!0,children:e.jsxs(p,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:a}),s.getIsSorted()==="desc"?e.jsx(M,{className:"ml-2 h-4 w-4"}):s.getIsSorted()==="asc"?e.jsx(P,{className:"ml-2 h-4 w-4"}):e.jsx(pe,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(_,{align:"start",children:[e.jsxs(w,{onClick:()=>s.toggleSorting(!1),children:[e.jsx(P,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(w,{onClick:()=>s.toggleSorting(!0),children:[e.jsx(M,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),e.jsx(A,{}),e.jsxs(w,{onClick:()=>s.toggleVisibility(!1),children:[e.jsx(fe,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})}):e.jsx("div",{className:f(n),children:a})}function We({row:s}){return e.jsxs(Y,{children:[e.jsx(V,{asChild:!0,children:e.jsxs(p,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(_,{align:"end",className:"w-[160px]",children:[e.jsx(w,{children:e.jsxs("div",{className:"min-w-full flex space-between items-center gap-2 flex-row",children:["Details",e.jsx(Oe,{className:"h-4 w-4"})]})}),e.jsx(A,{}),e.jsx(w,{asChild:!0,children:e.jsx(Re,{row:s})})]})]})}const Je=[{accessorKey:"filter_date",header:({column:s})=>e.jsx(F,{column:s,title:"Arrival Date",className:"pl-3"}),cell:({row:s})=>e.jsx("div",{className:"min-w-[80px] pl-3",children:s.getValue("filter_date")}),enableSorting:!0,enableHiding:!0},{accessorKey:"total",header:({column:s})=>e.jsx(F,{column:s,title:"Total Count"}),cell:({row:s})=>e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:s.getValue("total")})}),toggleSorting:!0,filterFn:(s,a,n)=>n.includes(s.getValue(a))},{id:"actions",cell:({row:s})=>e.jsx(We,{row:s})}];function Qe({table:s}){return e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs($,{value:`${s.getState().pagination.pageSize}`,onValueChange:a=>{s.setPageSize(Number(a))},children:[e.jsx(H,{className:"h-8 w-[70px]",children:e.jsx(G,{placeholder:s.getState().pagination.pageSize})}),e.jsx(q,{side:"top",children:[10,20,30,40,50].map(a=>e.jsx(B,{value:`${a}`,children:a},a))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of"," ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(p,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(ve,{className:"h-4 w-4"})]}),e.jsxs(p,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(we,{className:"h-4 w-4"})]}),e.jsxs(p,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(be,{className:"h-4 w-4"})]}),e.jsxs(p,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ye,{className:"h-4 w-4"})]})]})]})]})}function Xe({columns:s,data:a}){var c;const[n,t]=r.useState({}),[l,d]=r.useState({}),[o,x]=r.useState([]),[g,m]=r.useState([]),i=Ie({data:a,columns:s,state:{sorting:g,columnVisibility:l,rowSelection:n,columnFilters:o},initialState:{sortBy:[{id:"status",desc:!1}]},enableRowSelection:!0,onRowSelectionChange:t,onSortingChange:m,onColumnFiltersChange:x,onColumnVisibilityChange:d,getCoreRowModel:Ge(),getFilteredRowModel:He(),getPaginationRowModel:$e(),getSortedRowModel:Ee(),getFacetedRowModel:Le(),getFacetedUniqueValues:Ae()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(Fe,{children:[e.jsx(Ye,{children:i.getHeaderGroups().map(u=>e.jsx(D,{children:u.headers.map(h=>e.jsx(Ve,{colSpan:h.colSpan,children:h.isPlaceholder?null:k(h.column.columnDef.header,h.getContext())},h.id))},u.id))}),e.jsx(_e,{children:(c=i.getRowModel().rows)!=null&&c.length?i.getRowModel().rows.map(u=>e.jsx(D,{"data-state":u.original.status==="Active"&&"selected",children:u.getVisibleCells().map(h=>e.jsx(I,{children:k(h.column.columnDef.cell,h.getContext())},h.id))},u.id)):e.jsx(D,{children:e.jsx(I,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(Qe,{table:i})]})}var R="Tabs",[Ze,Ns]=Me(R,[L]),z=L(),[es,T]=Ze(R),K=r.forwardRef((s,a)=>{const{__scopeTabs:n,value:t,onValueChange:l,defaultValue:d,orientation:o="horizontal",dir:x,activationMode:g="automatic",...m}=s,i=Ne(x),[c,u]=Te({prop:t,onChange:l,defaultProp:d});return e.jsx(es,{scope:n,baseId:Pe(),value:c,onValueChange:u,orientation:o,dir:i,activationMode:g,children:e.jsx(N.div,{dir:i,"data-orientation":o,...m,ref:a})})});K.displayName=R;var O="TabsList",U=r.forwardRef((s,a)=>{const{__scopeTabs:n,loop:t=!0,...l}=s,d=T(O,n),o=z(n);return e.jsx(Ce,{asChild:!0,...o,orientation:d.orientation,dir:d.dir,loop:t,children:e.jsx(N.div,{role:"tablist","aria-orientation":d.orientation,...l,ref:a})})});U.displayName=O;var W="TabsTrigger",J=r.forwardRef((s,a)=>{const{__scopeTabs:n,value:t,disabled:l=!1,...d}=s,o=T(W,n),x=z(n),g=Z(o.baseId,t),m=ee(o.baseId,t),i=t===o.value;return e.jsx(Se,{asChild:!0,...x,focusable:!l,active:i,children:e.jsx(N.button,{type:"button",role:"tab","aria-selected":i,"aria-controls":m,"data-state":i?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:g,...d,ref:a,onMouseDown:S(s.onMouseDown,c=>{!l&&c.button===0&&c.ctrlKey===!1?o.onValueChange(t):c.preventDefault()}),onKeyDown:S(s.onKeyDown,c=>{[" ","Enter"].includes(c.key)&&o.onValueChange(t)}),onFocus:S(s.onFocus,()=>{const c=o.activationMode!=="manual";!i&&!l&&c&&o.onValueChange(t)})})})});J.displayName=W;var Q="TabsContent",X=r.forwardRef((s,a)=>{const{__scopeTabs:n,value:t,forceMount:l,children:d,...o}=s,x=T(Q,n),g=Z(x.baseId,t),m=ee(x.baseId,t),i=t===x.value,c=r.useRef(i);return r.useEffect(()=>{const u=requestAnimationFrame(()=>c.current=!1);return()=>cancelAnimationFrame(u)},[]),e.jsx(ke,{present:l||i,children:({present:u})=>e.jsx(N.div,{"data-state":i?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":g,hidden:!u,id:m,tabIndex:0,...o,ref:a,style:{...s.style,animationDuration:c.current?"0s":void 0},children:u&&d})})});X.displayName=Q;function Z(s,a){return`${s}-trigger-${a}`}function ee(s,a){return`${s}-content-${a}`}var ss=K,se=U,ae=J,te=X;const as=ss,ne=r.forwardRef(({className:s,...a},n)=>e.jsx(se,{ref:n,className:f("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a}));ne.displayName=se.displayName;const oe=r.forwardRef(({className:s,...a},n)=>e.jsx(ae,{ref:n,className:f("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a}));oe.displayName=ae.displayName;const y=r.forwardRef(({className:s,...a},n)=>e.jsx(te,{ref:n,className:f("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));y.displayName=te.displayName;const b={arrival:{nationality:"Nationality",day:"Day",week:"Week",month:"Month",year:"Year"},tourist:{nationality:"Nationality",day:"Day",week:"Week",month:"Month",year:"Year"},printed:{day:"Day",week:"Week",month:"Month",year:"Year"}};function Cs({reports:s}){const[a,n]=r.useState("day"),[t,l]=r.useState(!1),[d,o]=r.useState(s),[x,g]=r.useState("arrival"),{reportDate:m,setReportDate:i}=ie(),c=j=>g(j),u=j=>n(j),h=()=>{ce.get(route("report.search",{start_date:v(m.from).format("YYYY-MM-DD"),end_date:v(m.to).format("YYYY-MM-DD"),filter_by:a,module:x})).then(j=>{console.log(j),o(j.data)})},re=()=>{console.log("Download"),de.get("/report/export",{start_date:v(m.from).format("YYYY-MM-DD"),end_date:v(m.to).format("YYYY-MM-DD"),filter_by:a})};return r.useEffect(()=>{l(a!=="day")},[a]),e.jsxs(De,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Reports"}),breadcrumb:"Reports",subBread:"Extract data",children:[e.jsx(le,{title:"Reports"}),e.jsxs("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between lg:px-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Filter by: "}),e.jsxs($,{onValueChange:u,defaultValue:"day",children:[e.jsx(H,{className:"w-[180px]",children:e.jsx(G,{placeholder:"Filter by"})}),e.jsx(ns,{reportSelected:x})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{disabled:t,setReportDate:i}),e.jsx(p,{size:"icon",onClick:()=>h(),children:e.jsx(qe,{})}),e.jsx(p,{variant:"outline",size:"icon",onClick:()=>re(),disabled:!0,children:e.jsx(ze,{})})]})]}),e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-1",children:e.jsxs(as,{onValueChange:c,defaultValue:"arrival",className:"space-y-4",children:[e.jsx(ts,{reportSelected:x}),e.jsx(y,{value:"arrival",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx(Xe,{data:d,columns:Je})})}),e.jsx(y,{value:"printed",children:"Reports for printed IDs"}),e.jsx(y,{value:"tourist",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:"Tourists"})})]})})]})]})}const ts=()=>e.jsx(ne,{children:b&&Object.keys(b).map(s=>e.jsx(oe,{value:s,children:s},s))}),ns=({reportSelected:s})=>e.jsx(q,{children:b&&Object.keys(b[s]).map(a=>e.jsx(B,{value:a,children:b[s][a]},a))});export{ns as CustomFilters,ts as CustomTabsList,Cs as default};
