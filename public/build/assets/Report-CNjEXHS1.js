import{r,h as m,j as e,u as _,L as H,a as A,S as E}from"./app-DentDv-F.js";import{c as j,B as c}from"./button-CYS4Z4mX.js";import{f as v,C as q,a as z}from"./calendar-VI4j_LIO.js";import{P as B,e as G,f as $,S as R,a as P,b as k,c as Y,d as g}from"./popover--oit0PHB.js";import{D as F,a as I,A as S,b as y,C as U,c as T,d as u,e as V,E as K,f as O,k as W,l as J,m as Q,n as X,P as Z}from"./AuthenticatedLayout-CJ4oyYZc.js";import"./dialog-CPwcJY8u.js";import"./input-CVcUz5Si.js";import"./label-6HzZNMNY.js";import{DeleteTouristDialog as ee}from"./Delete-Crmrvgk_.js";import"./index-Dx_WtEws.js";import{c as L}from"./index-BbQyhQz7.js";import{u as se,T as ae,m as te,n as C,o as le,p as D,q as ne,r as M,g as oe,h as re,i as ie,j as ce,k as de,l as xe,S as me}from"./command-D_RqNCc9.js";import"./index-BIpoOIKx.js";import"./index-CDgpXu39.js";import"./index-Dzmv4FfJ.js";import"./x-K-NI3FSu.js";import"./alert-dialog-BsbJwLHn.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ge=L("Download",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2",key:"mrq65r"}],["path",{d:"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2",key:"be3xqs"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]],pe=L("View",ue);function je({className:s,disabled:a,setReportDate:n}){const[t,h]=r.useState({from:m(new Date).format("YYYY-MM-DD"),to:m().add(6,"days").format("YYYY-MM-DD")}),o=d=>{h(d),n(d)};return e.jsx("div",{className:j("grid gap-2",s),children:e.jsxs(B,{children:[e.jsx(G,{asChild:!0,children:e.jsxs(c,{id:"date",variant:"outline",className:j("w-[260px] justify-start text-left font-normal",!t&&"text-muted-foreground"),disabled:a,children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),t!=null&&t.from?t.to?e.jsxs(e.Fragment,{children:[v(t.from,"LLL dd, y")," -"," ",v(t.to,"LLL dd, y")]}):v(t.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx($,{className:"w-auto p-0",align:"end",children:e.jsx(z,{initialFocus:!0,mode:"range",defaultMonth:t==null?void 0:t.from,selected:t,onSelect:o,numberOfMonths:2})})]})})}function b({column:s,title:a,className:n}){return s.getCanSort()?e.jsx("div",{className:j("flex items-center space-x-2",n),children:e.jsxs(F,{children:[e.jsx(I,{asChild:!0,children:e.jsxs(c,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:a}),s.getIsSorted()==="desc"?e.jsx(S,{className:"ml-2 h-4 w-4"}):s.getIsSorted()==="asc"?e.jsx(y,{className:"ml-2 h-4 w-4"}):e.jsx(U,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(T,{align:"start",children:[e.jsxs(u,{onClick:()=>s.toggleSorting(!1),children:[e.jsx(y,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(u,{onClick:()=>s.toggleSorting(!0),children:[e.jsx(S,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),e.jsx(V,{}),e.jsxs(u,{onClick:()=>s.toggleVisibility(!1),children:[e.jsx(K,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})}):e.jsx("div",{className:j(n),children:a})}function fe({row:s}){return e.jsxs(F,{children:[e.jsx(I,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(T,{align:"end",className:"w-[160px]",children:[e.jsx(u,{children:e.jsxs("div",{className:"min-w-full flex space-between items-center gap-2 flex-row",children:["Details",e.jsx(pe,{className:"h-4 w-4"})]})}),e.jsx(V,{}),e.jsx(u,{asChild:!0,children:e.jsx(ee,{row:s})})]})]})}const we=[{accessorKey:"filter_date",header:({column:s})=>e.jsx(b,{column:s,title:"Arrival Date",className:"pl-3"}),cell:({row:s})=>e.jsx("div",{className:"min-w-[80px] pl-3",children:s.getValue("filter_date")}),enableSorting:!0,enableHiding:!0},{accessorKey:"total",header:({column:s})=>e.jsx(b,{column:s,title:"Total Count"}),cell:({row:s})=>e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:s.getValue("total")})}),toggleSorting:!0,filterFn:(s,a,n)=>n.includes(s.getValue(a))},{id:"actions",cell:({row:s})=>e.jsx(fe,{row:s})}];function Ne({table:s}){return e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(R,{value:`${s.getState().pagination.pageSize}`,onValueChange:a=>{s.setPageSize(Number(a))},children:[e.jsx(P,{className:"h-8 w-[70px]",children:e.jsx(k,{placeholder:s.getState().pagination.pageSize})}),e.jsx(Y,{side:"top",children:[10,20,30,40,50].map(a=>e.jsx(g,{value:`${a}`,children:a},a))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of"," ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(c,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(W,{className:"h-4 w-4"})]}),e.jsxs(c,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(J,{className:"h-4 w-4"})]}),e.jsxs(c,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(Q,{className:"h-4 w-4"})]}),e.jsxs(c,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(X,{className:"h-4 w-4"})]})]})]})]})}function ve({columns:s,data:a}){var p;const[n,t]=r.useState({}),[h,o]=r.useState({}),[d,f]=r.useState([]),[w,N]=r.useState([]),x=se({data:a,columns:s,state:{sorting:w,columnVisibility:h,rowSelection:n,columnFilters:d},initialState:{sortBy:[{id:"status",desc:!1}]},enableRowSelection:!0,onRowSelectionChange:t,onSortingChange:N,onColumnFiltersChange:f,onColumnVisibilityChange:o,getCoreRowModel:xe(),getFilteredRowModel:de(),getPaginationRowModel:ce(),getSortedRowModel:ie(),getFacetedRowModel:re(),getFacetedUniqueValues:oe()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(ae,{children:[e.jsx(te,{children:x.getHeaderGroups().map(l=>e.jsx(C,{children:l.headers.map(i=>e.jsx(le,{colSpan:i.colSpan,children:i.isPlaceholder?null:D(i.column.columnDef.header,i.getContext())},i.id))},l.id))}),e.jsx(ne,{children:(p=x.getRowModel().rows)!=null&&p.length?x.getRowModel().rows.map(l=>e.jsx(C,{"data-state":l.original.status==="Active"&&"selected",children:l.getVisibleCells().map(i=>e.jsx(M,{children:D(i.column.columnDef.cell,i.getContext())},i.id))},l.id)):e.jsx(C,{children:e.jsx(M,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(Ne,{table:x})]})}function Ae({reports:s}){const[a,n]=r.useState("day"),[t,h]=r.useState(!1),{reportDate:o,setReportDate:d}=_(),[f,w]=r.useState(s),N=l=>n(l),x=()=>{A.get(route("report.search",{start_date:m(o.from).format("YYYY-MM-DD"),end_date:m(o.to).format("YYYY-MM-DD"),filter_by:a})).then(l=>{console.log(l),w(l.data)})},p=()=>{console.log("Download"),E.get("/report/export",{start_date:m(o.from).format("YYYY-MM-DD"),end_date:m(o.to).format("YYYY-MM-DD"),filter_by:a})};return r.useEffect(()=>{h(a!=="day")},[a]),r.useEffect(()=>{console.log(o)},[o]),e.jsxs(Z,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Reports"}),breadcrumb:"Reports",subBread:"Extract data",children:[e.jsx(H,{title:"Reports"}),e.jsxs("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between lg:px-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Filter by: "}),e.jsxs(R,{onValueChange:N,defaultValue:"day",children:[e.jsx(P,{className:"w-[180px]",children:e.jsx(k,{placeholder:"Filter by"})}),e.jsxs(Y,{children:[e.jsx(g,{value:"day",children:"Day"}),e.jsx(g,{value:"week",children:"Week"}),e.jsx(g,{value:"month",children:"Month"}),e.jsx(g,{value:"year",children:"Year"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{disabled:t,setReportDate:d}),e.jsx(c,{size:"icon",onClick:()=>x(),children:e.jsx(me,{})}),e.jsx(c,{variant:"outline",size:"icon",onClick:()=>p(),disabled:!0,children:e.jsx(ge,{})})]})]}),e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-1",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx(ve,{data:f,columns:we})})})]})]})}export{Ae as default};
